{"version":3,"names":["window","document","DEFAULT_CONFIG","width","height","backgroundColor","tools","colors","exportFormat","theme","SketchWidget","constructor","container","config","this","querySelector","Error","lassoActive","lassoPoints","lassoSelectedStrokes","lassoDragging","lassoDragStart","lassoLastPos","lassoScale","rulerActive","rulerStart","rulerEnd","panY","isPanning","lastPanY","toolThickness","pencil","pen","marker","eraser","init","createHTML","setTimeout","setupCanvas","setupTools","setupEventListeners","initializeState","containerRect","getBoundingClientRect","actualWidth","includes","parseFloat","parseInt","actualHeight","innerHTML","map","tool","charAt","toUpperCase","slice","getToolIcon","join","color","callback","lasso","ruler","canvas","ctx","getContext","strokes","undoneStrokes","currentStroke","drawing","currentTool","currentColor","thickness","querySelectorAll","forEach","btn","addEventListener","setActiveTool","dataset","swatch","setActiveColor","e","startDraw","draw","endDraw","target","value","undo","redo","exportDrawing","handleLassoStart","handleLassoMove","handleLassoEnd","handleRulerStart","handleRulerMove","handleRulerEnd","handlePanStart","handlePanMove","handlePanEnd","deleteLassoSelection","copyLassoSelection","toggleToolbar","clearTimeout","resizeTimeout","resize","style","background","transform","border","isValidPointer","points","x","offsetX","y","offsetY","addPoint","redraw","minDist","length","push","last","dx","dy","clearRect","save","translate","stroke","drawStroke","restore","drawRuler","drawLasso","strokeStyle","lineCap","lineJoin","globalAlpha","shadowColor","shadowBlur","setLineDash","pts","beginPath","arc","Math","PI","fillStyle","fill","smoothPts","getCatmullRomSpline","movingAverage","moveTo","i","lineTo","lineWidth","pop","exportSVG","exportPNG","exportJSON","svg","createElementNS","setAttribute","appendChild","circle","path","pathData","defs","filter","blur","insertBefore","firstChild","svgData","XMLSerializer","serializeToString","svgBlob","Blob","type","svgUrl","URL","createObjectURL","link","createElement","download","href","click","revokeObjectURL","toDataURL","sketchData","version","json","JSON","stringify","blob","url","clear","getStrokes","loadStrokes","pointInPolygon","updateLassoButtons","pt","strokeInLasso","final","highlightStroke","polygon","some","point","inside","j","xi","yi","xj","yj","show","display","offset","newStrokes","concat","snapToAngle","start","end","angle","atan2","snap","snappedAngle","round","dist","sqrt","cos","sin","segments","result","p0","p1","p2","p3","t","s","smoothed","sumX","sumY","count","max","min","pointerType","isPrimary","button","clientY","classList","toggle","element"],"sources":["src/sketch-widget.js"],"mappings":"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","ignoreList":[]}