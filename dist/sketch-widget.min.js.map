{"version":3,"names":["window","document","DEFAULT_CONFIG","width","height","backgroundColor","tools","colors","exportFormat","theme","SketchWidget","constructor","container","config","this","querySelector","Error","lassoActive","lassoPoints","lassoSelectedStrokes","lassoDragging","lassoDragStart","lassoLastPos","lassoScale","rulerActive","rulerStart","rulerEnd","panY","isPanning","lastPanY","toolThickness","pencil","pen","marker","eraser","init","createHTML","setupCanvas","setupTools","setupEventListeners","initializeState","containerRect","getBoundingClientRect","setTimeout","actualWidth","includes","parseFloat","parseInt","actualHeight","innerHTML","map","tool","charAt","toUpperCase","slice","getToolIcon","join","color","lasso","ruler","canvas","ctx","getContext","strokes","undoneStrokes","currentStroke","drawing","currentTool","currentColor","thickness","querySelectorAll","forEach","btn","addEventListener","setActiveTool","dataset","swatch","setActiveColor","e","startDraw","draw","endDraw","target","value","undo","redo","exportDrawing","handleLassoStart","handleLassoMove","handleLassoEnd","handleRulerStart","handleRulerMove","handleRulerEnd","handlePanStart","handlePanMove","handlePanEnd","deleteLassoSelection","copyLassoSelection","toggleToolbar","clearTimeout","resizeTimeout","resize","style","background","transform","border","isValidPointer","points","x","offsetX","y","offsetY","addPoint","redraw","minDist","length","push","last","dx","dy","clearRect","save","translate","stroke","drawStroke","restore","drawRuler","drawLasso","strokeStyle","lineCap","lineJoin","globalAlpha","shadowColor","shadowBlur","setLineDash","pts","beginPath","arc","Math","PI","fillStyle","fill","smoothPts","getCatmullRomSpline","movingAverage","moveTo","i","lineTo","lineWidth","pop","exportSVG","exportPNG","exportJSON","svg","createElementNS","setAttribute","appendChild","circle","path","pathData","defs","filter","blur","insertBefore","firstChild","svgData","XMLSerializer","serializeToString","svgBlob","Blob","type","svgUrl","URL","createObjectURL","link","createElement","download","href","click","revokeObjectURL","toDataURL","sketchData","version","json","JSON","stringify","blob","url","clear","getStrokes","loadStrokes","pointInPolygon","updateLassoButtons","pt","strokeInLasso","final","highlightStroke","polygon","some","point","inside","j","xi","yi","xj","yj","show","display","offset","newStrokes","concat","snapToAngle","start","end","angle","atan2","snap","snappedAngle","round","dist","sqrt","cos","sin","segments","result","p0","p1","p2","p3","t","s","smoothed","sumX","sumY","count","max","min","pointerType","isPrimary","button","clientY","classList","toggle","element"],"sources":["src/sketch-widget.js"],"mappings":"CAOA,SAAUA,EAAQC,GAChB,aAGA,MAAMC,EAAiB,CACrBC,MAAO,IACPC,OAAQ,IACRC,gBAAiB,UACjBC,MAAO,CAAC,SAAU,MAAO,SAAU,SAAU,QAAS,SACtDC,OAAQ,CAAC,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,WACjGC,aAAc,MACdC,MAAO,SAGT,MAAMC,EACJ,WAAAC,CAAYC,EAAWC,EAAS,CAAC,GAI/B,GAHAC,KAAKD,OAAS,IAAKX,KAAmBW,GACtCC,KAAKF,UAAiC,iBAAdA,EAAyBX,EAASc,cAAcH,GAAaA,GAEhFE,KAAKF,UACR,MAAM,IAAII,MAAM,6CAIlBF,KAAKG,aAAc,EACnBH,KAAKI,YAAc,GACnBJ,KAAKK,qBAAuB,GAC5BL,KAAKM,eAAgB,EACrBN,KAAKO,eAAiB,KACtBP,KAAKQ,aAAe,KACpBR,KAAKS,WAAa,EAElBT,KAAKU,aAAc,EACnBV,KAAKW,WAAa,KAClBX,KAAKY,SAAW,KAEhBZ,KAAKa,KAAO,EACZb,KAAKc,WAAY,EACjBd,KAAKe,SAAW,EAGhBf,KAAKgB,cAAgB,CACnBC,OAAQ,EACRC,IAAK,EACLC,OAAQ,GACRC,OAAQ,IAGVpB,KAAKqB,MACP,CAEA,IAAAA,GACErB,KAAKsB,aACLtB,KAAKuB,cACLvB,KAAKwB,aACLxB,KAAKyB,sBACLzB,KAAK0B,iBACP,CAEA,UAAAJ,GAEE,MAAMK,EAAgB3B,KAAKF,UAAU8B,wBAGrC,KAA6B,IAAxBD,EAActC,OAAwC,IAAzBsC,EAAcrC,QACrB,SAAtBU,KAAKD,OAAOV,OAA2C,SAAvBW,KAAKD,OAAOT,QAE/C,YADAuC,WAAW,IAAM7B,KAAKsB,aAAc,IAItC,MAAMQ,EAAoC,SAAtB9B,KAAKD,OAAOV,MAAmBsC,EAActC,MAChB,iBAAtBW,KAAKD,OAAOV,OAAsBW,KAAKD,OAAOV,MAAM0C,SAAS,KACpEC,WAAWhC,KAAKD,OAAOV,OAAS,IAAOsC,EAActC,MACtD4C,SAASjC,KAAKD,OAAOV,OAClC6C,EAAsC,SAAvBlC,KAAKD,OAAOT,OAAoBqC,EAAcrC,OAChB,iBAAvBU,KAAKD,OAAOT,QAAuBU,KAAKD,OAAOT,OAAOyC,SAAS,KACtEC,WAAWhC,KAAKD,OAAOT,QAAU,IAAOqC,EAAcrC,OACvD2C,SAASjC,KAAKD,OAAOT,QAGzCU,KAAK8B,YAAcA,GAAe,IAClC9B,KAAKkC,aAAeA,GAAgB,IAEpClC,KAAKF,UAAUqC,UAAY,iHAC6EnC,KAAKD,OAAOV,kBAAkBW,KAAKD,OAAOT,2OAErGU,KAAK8B,wBAAwB9B,KAAKkC,oDACzDlC,KAAKD,OAAOR,+VASjBS,KAAK8B,yCACJ9B,KAAKkC,uvBAuBblC,KAAKD,OAAOP,MAAM4C,IAAIC,GAAQ,yDACQA,0UAS3BA,EAAKC,OAAO,GAAGC,cAAgBF,EAAKG,MAAM,OAAOxC,KAAKyC,YAAYJ,+BAC5EK,KAAK,2oDAiDN1C,KAAKD,OAAON,OAAO2C,IAAIO,GAAS,8DACWA,mMAK3BA,oGAGJ,YAAVA,EAAsB,0BAA4B,mDAEnDD,KAAK,uzBAYlB,CAEA,WAAAD,CAAYJ,GASV,MARc,CACZpB,OAAQ,KACRC,IAAK,MACLC,OAAQ,MACRC,OAAQ,KACRwB,MAAO,KACPC,MAAO,MAEIR,IAAS,KACxB,CAEA,WAAAd,GACEvB,KAAK8C,OAAS9C,KAAKF,UAAUG,cAAc,kBAC3CD,KAAK+C,IAAM/C,KAAK8C,OAAOE,WAAW,MAGlChD,KAAKiD,QAAU,GACfjD,KAAKkD,cAAgB,GACrBlD,KAAKmD,cAAgB,KACrBnD,KAAKoD,SAAU,EACfpD,KAAKqD,YAAc,SACnBrD,KAAKsD,aAAetD,KAAKD,OAAON,OAAO,GACvCO,KAAKuD,UAAY,CACnB,CAEA,UAAA/B,GAEExB,KAAKF,UAAU0D,iBAAiB,aAAaC,QAAQC,IACnDA,EAAIC,iBAAiB,QAAS,KAC5B3D,KAAK4D,cAAcF,EAAIG,QAAQxB,UAKnCrC,KAAKF,UAAU0D,iBAAiB,iBAAiBC,QAAQK,IACvDA,EAAOH,iBAAiB,QAAS,KAC/B3D,KAAK+D,eAAeD,EAAOD,QAAQlB,WAKvC3C,KAAK4D,cAAc,UACnB5D,KAAK+D,eAAe/D,KAAKD,OAAON,OAAO,GACzC,CAEA,mBAAAgC,GAEEzB,KAAK8C,OAAOa,iBAAiB,cAAgBK,GAAMhE,KAAKiE,UAAUD,IAClEhE,KAAK8C,OAAOa,iBAAiB,cAAgBK,GAAMhE,KAAKkE,KAAKF,IAC7DhE,KAAK8C,OAAOa,iBAAiB,YAAcK,GAAMhE,KAAKmE,QAAQH,IAG9DhE,KAAKF,UAAUG,cAAc,qBAAqB0D,iBAAiB,QAAUK,IAC3EhE,KAAKuD,UAAYtB,SAAS+B,EAAEI,OAAOC,SAGrCrE,KAAKF,UAAUG,cAAc,aAAa0D,iBAAiB,QAAS,IAAM3D,KAAKsE,QAC/EtE,KAAKF,UAAUG,cAAc,aAAa0D,iBAAiB,QAAS,IAAM3D,KAAKuE,QAC/EvE,KAAKF,UAAUG,cAAc,eAAe0D,iBAAiB,QAAS,IAAM3D,KAAKwE,iBAGjFxE,KAAK8C,OAAOa,iBAAiB,cAAgBK,GAAMhE,KAAKyE,iBAAiBT,IACzEhE,KAAK8C,OAAOa,iBAAiB,cAAgBK,GAAMhE,KAAK0E,gBAAgBV,IACxEhE,KAAK8C,OAAOa,iBAAiB,YAAcK,GAAMhE,KAAK2E,eAAeX,IAGrEhE,KAAK8C,OAAOa,iBAAiB,cAAgBK,GAAMhE,KAAK4E,iBAAiBZ,IACzEhE,KAAK8C,OAAOa,iBAAiB,cAAgBK,GAAMhE,KAAK6E,gBAAgBb,IACxEhE,KAAK8C,OAAOa,iBAAiB,YAAcK,GAAMhE,KAAK8E,eAAed,IAGrEhE,KAAK8C,OAAOa,iBAAiB,cAAgBK,GAAMhE,KAAK+E,eAAef,IACvEhE,KAAK8C,OAAOa,iBAAiB,cAAgBK,GAAMhE,KAAKgF,cAAchB,IACtEhE,KAAK8C,OAAOa,iBAAiB,YAAcK,GAAMhE,KAAKiF,aAAajB,IAGnEhE,KAAKF,UAAUG,cAAc,qBAAqB0D,iBAAiB,QAAS,IAAM3D,KAAKkF,wBACvFlF,KAAKF,UAAUG,cAAc,mBAAmB0D,iBAAiB,QAAS,IAAM3D,KAAKmF,sBAGrFnF,KAAKF,UAAUG,cAAc,mBAAmB0D,iBAAiB,QAAS,IAAM3D,KAAKoF,kBAG3D,SAAtBpF,KAAKD,OAAOV,OAA2C,SAAvBW,KAAKD,OAAOT,QACd,iBAAtBU,KAAKD,OAAOV,OAAsBW,KAAKD,OAAOV,MAAM0C,SAAS,MACtC,iBAAvB/B,KAAKD,OAAOT,QAAuBU,KAAKD,OAAOT,OAAOyC,SAAS,OACzE7C,EAAOyE,iBAAiB,SAAU,KAChC0B,aAAarF,KAAKsF,eAClBtF,KAAKsF,cAAgBzD,WAAW,IAAM7B,KAAKuF,SAAU,MAG3D,CAEA,aAAA3B,CAAcvB,GACZrC,KAAKqD,YAAchB,EACnBrC,KAAKF,UAAU0D,iBAAiB,aAAaC,QAAQC,IACnDA,EAAI8B,MAAMC,WAAa/B,EAAIG,QAAQxB,OAASA,EAAO,UAAY,WAEnE,CAEA,cAAA0B,CAAepB,GACb3C,KAAKsD,aAAeX,EACpB3C,KAAKF,UAAU0D,iBAAiB,iBAAiBC,QAAQK,IACvDA,EAAO0B,MAAME,UAAY5B,EAAOD,QAAQlB,QAAUA,EAAQ,aAAe,WACzEmB,EAAO0B,MAAMG,OAAS7B,EAAOD,QAAQlB,QAAUA,EAAQ,oBAAsB,qBAEjF,CAEA,SAAAsB,CAAUD,GACHhE,KAAK4F,eAAe5B,IACA,UAArBhE,KAAKqD,aAAgD,UAArBrD,KAAKqD,cAEzCrD,KAAKoD,SAAU,EACfpD,KAAKmD,cAAgB,CACnBd,KAAMrC,KAAKqD,YACXV,MAA4B,WAArB3C,KAAKqD,YAA2B,OAASrD,KAAKsD,aACrDC,UAAWvD,KAAKgB,cAAchB,KAAKqD,cAAgBrD,KAAKuD,UACxDsC,OAAQ,CAAC,CAAEC,EAAG9B,EAAE+B,QAASC,EAAGhC,EAAEiC,WAElC,CAEA,IAAA/B,CAAKF,GACEhE,KAAKoD,SAAYpD,KAAKmD,eACtBnD,KAAK4F,eAAe5B,KAEzBhE,KAAKkG,SAASlG,KAAKmD,cAAc0C,OAAQ7B,EAAE+B,QAAS/B,EAAEiC,QAAS,KAC/DjG,KAAKmG,SACP,CAEA,QAAAD,CAASL,EAAQC,EAAGE,EAAGI,EAAU,KAC/B,GAAsB,IAAlBP,EAAOQ,OAET,YADAR,EAAOS,KAAK,CAACR,IAAGE,MAIlB,MAAMO,EAAOV,EAAOA,EAAOQ,OAAS,GAC9BG,EAAKV,EAAIS,EAAKT,EAAGW,EAAKT,EAAIO,EAAKP,EACjCQ,EAAGA,EAAKC,EAAGA,EAAKL,EAAQA,GAC1BP,EAAOS,KAAK,CAACR,IAAGE,KAEpB,CAEA,OAAA7B,CAAQH,GACDhE,KAAKoD,SAAYpD,KAAKmD,gBAE3BnD,KAAKiD,QAAQqD,KAAKtG,KAAKmD,eACvBnD,KAAKmD,cAAgB,KACrBnD,KAAKoD,SAAU,EACfpD,KAAKkD,cAAgB,GACrBlD,KAAKmG,SACP,CAEA,MAAAA,GACEnG,KAAK+C,IAAI2D,UAAU,EAAG,EAAG1G,KAAK8B,YAAa9B,KAAKkC,cAChDlC,KAAK+C,IAAI4D,OACT3G,KAAK+C,IAAI6D,UAAU,EAAG5G,KAAKa,MAG3B,IAAK,MAAMgG,KAAU7G,KAAKiD,QACxBjD,KAAK8G,WAAWD,GAId7G,KAAKmD,eAAenD,KAAK8G,WAAW9G,KAAKmD,eAE7CnD,KAAK+C,IAAIgE,UAGL/G,KAAKU,aAAaV,KAAKgH,aACvBhH,KAAKG,aAAeH,KAAKK,qBAAqBgG,OAAS,IAAGrG,KAAKiH,WAAU,EAC/E,CAGA,MAAA1B,GACE,MAAM5D,EAAgB3B,KAAKF,UAAU8B,wBAC/BE,EAAoC,SAAtB9B,KAAKD,OAAOV,MAAmBsC,EAActC,MAChB,iBAAtBW,KAAKD,OAAOV,OAAsBW,KAAKD,OAAOV,MAAM0C,SAAS,KACpEC,WAAWhC,KAAKD,OAAOV,OAAS,IAAOsC,EAActC,MACtD4C,SAASjC,KAAKD,OAAOV,OAClC6C,EAAsC,SAAvBlC,KAAKD,OAAOT,OAAoBqC,EAAcrC,OAChB,iBAAvBU,KAAKD,OAAOT,QAAuBU,KAAKD,OAAOT,OAAOyC,SAAS,KACtEC,WAAWhC,KAAKD,OAAOT,QAAU,IAAOqC,EAAcrC,OACvD2C,SAASjC,KAAKD,OAAOT,QAEzCU,KAAK8B,YAAcA,GAAe,IAClC9B,KAAKkC,aAAeA,GAAgB,IAGpClC,KAAK8C,OAAOzD,MAAQW,KAAK8B,YACzB9B,KAAK8C,OAAOxD,OAASU,KAAKkC,aAC1BlC,KAAK8C,OAAO0C,MAAMnG,MAAQW,KAAK8B,YAAc,KAC7C9B,KAAK8C,OAAO0C,MAAMlG,OAASU,KAAKkC,aAAe,KAG/ClC,KAAKmG,QACP,CAEA,UAAAW,CAAWD,GACT7G,KAAK+C,IAAI4D,OAGT3G,KAAK+C,IAAImE,YAAcL,EAAOlE,MAC9B3C,KAAK+C,IAAIoE,QAAU,QACnBnH,KAAK+C,IAAIqE,SAAW,QAEA,WAAhBP,EAAOxE,MACTrC,KAAK+C,IAAIsE,YAAc,GACvBrH,KAAK+C,IAAIuE,YAAcT,EAAOlE,MAC9B3C,KAAK+C,IAAIwE,WAAa,GACG,QAAhBV,EAAOxE,MAChBrC,KAAK+C,IAAIsE,YAAc,GACvBrH,KAAK+C,IAAIwE,WAAa,GACG,WAAhBV,EAAOxE,MAChBrC,KAAK+C,IAAIsE,YAAc,GACvBrH,KAAK+C,IAAIyE,YAAY,CAAC,GAAK,IAC3BxH,KAAK+C,IAAIwE,WAAa,IAEtBvH,KAAK+C,IAAIsE,YAAc,EACvBrH,KAAK+C,IAAIwE,WAAa,GAIxB,MAAME,EAAMZ,EAAOhB,OACnB,GAAI4B,EAAIpB,OAAS,EAOf,OANArG,KAAK+C,IAAI2E,YACT1H,KAAK+C,IAAI4E,IAAIF,EAAI,GAAG3B,EAAG2B,EAAI,GAAGzB,EAAGa,EAAOtD,UAAY,EAAG,EAAG,EAAIqE,KAAKC,IACnE7H,KAAK+C,IAAI+E,UAAYjB,EAAOlE,MAC5B3C,KAAK+C,IAAIsE,YAAc,EACvBrH,KAAK+C,IAAIgF,YACT/H,KAAK+C,IAAIgE,UAKX,MAAMiB,EAAYhI,KAAKiI,oBACrBjI,KAAKkI,cAAcT,EAAK,GACxB,IAIFzH,KAAK+C,IAAI2E,YACT1H,KAAK+C,IAAIoF,OAAOH,EAAU,GAAGlC,EAAGkC,EAAU,GAAGhC,GAE7C,IAAK,IAAIoC,EAAI,EAAGA,EAAIJ,EAAU3B,OAAQ+B,IACpCpI,KAAK+C,IAAIsF,OAAOL,EAAUI,GAAGtC,EAAGkC,EAAUI,GAAGpC,GAG/ChG,KAAK+C,IAAIuF,UAAYzB,EAAOtD,UAC5BvD,KAAK+C,IAAI8D,SACT7G,KAAK+C,IAAIyE,YAAY,IACrBxH,KAAK+C,IAAIgE,SACX,CAEA,IAAAzC,GACMtE,KAAKiD,QAAQoD,OAAS,IACxBrG,KAAKkD,cAAcoD,KAAKtG,KAAKiD,QAAQsF,OACrCvI,KAAKmG,SAET,CAEA,IAAA5B,GACMvE,KAAKkD,cAAcmD,OAAS,IAC9BrG,KAAKiD,QAAQqD,KAAKtG,KAAKkD,cAAcqF,OACrCvI,KAAKmG,SAET,CAEA,aAAA3B,GACmC,QAA7BxE,KAAKD,OAAOL,cAAuD,SAA7BM,KAAKD,OAAOL,cACpDM,KAAKwI,YAE0B,QAA7BxI,KAAKD,OAAOL,cAAuD,SAA7BM,KAAKD,OAAOL,cACpDM,KAAKyI,YAE0B,SAA7BzI,KAAKD,OAAOL,cACdM,KAAK0I,YAET,CAEA,SAAAF,GACE,MAAMG,EAAMxJ,EAASyJ,gBAAgB,6BAA8B,OACnED,EAAIE,aAAa,QAAS7I,KAAK8B,aAC/B6G,EAAIE,aAAa,SAAU7I,KAAKkC,cAChCyG,EAAIE,aAAa,UAAW,OAAO7I,KAAK8B,eAAe9B,KAAKkC,gBAG5D,MAAMuD,EAAatG,EAASyJ,gBAAgB,6BAA8B,QAC1EnD,EAAWoD,aAAa,QAAS,QACjCpD,EAAWoD,aAAa,SAAU,QAClCpD,EAAWoD,aAAa,OAAQ7I,KAAKD,OAAOR,iBAC5CoJ,EAAIG,YAAYrD,GAGhBzF,KAAKiD,QAAQQ,QAAQoD,IACnB,GAAIA,EAAOhB,OAAOQ,OAAS,EAAG,CAC5B,MAAM0C,EAAS5J,EAASyJ,gBAAgB,6BAA8B,UACtEG,EAAOF,aAAa,KAAMhC,EAAOhB,OAAO,GAAGC,GAC3CiD,EAAOF,aAAa,KAAMhC,EAAOhB,OAAO,GAAGG,GAC3C+C,EAAOF,aAAa,IAAKhC,EAAOtD,UAAY,GAC5CwF,EAAOF,aAAa,OAAQhC,EAAOlE,OACnCgG,EAAIG,YAAYC,EAClB,KAAO,CACL,MAAMC,EAAO7J,EAASyJ,gBAAgB,6BAA8B,QAE9DZ,EAAYhI,KAAKiI,oBACrBjI,KAAKkI,cAAcrB,EAAOhB,OAAQ,GAClC,IAGF,IAAIoD,EAAW,KAAKjB,EAAU,GAAGlC,KAAKkC,EAAU,GAAGhC,IACnD,IAAK,IAAIoC,EAAI,EAAGA,EAAIJ,EAAU3B,OAAQ+B,IACpCa,GAAY,MAAMjB,EAAUI,GAAGtC,KAAKkC,EAAUI,GAAGpC,IAGnDgD,EAAKH,aAAa,IAAKI,GACvBD,EAAKH,aAAa,SAAUhC,EAAOlE,OACnCqG,EAAKH,aAAa,eAAgBhC,EAAOtD,WACzCyF,EAAKH,aAAa,iBAAkB,SACpCG,EAAKH,aAAa,kBAAmB,SACrCG,EAAKH,aAAa,OAAQ,QAGN,WAAhBhC,EAAOxE,MACT2G,EAAKH,aAAa,UAAW,OAC7BG,EAAKH,aAAa,SAAU,wBACH,QAAhBhC,EAAOxE,KAChB2G,EAAKH,aAAa,UAAW,OACJ,WAAhBhC,EAAOxE,OAChB2G,EAAKH,aAAa,UAAW,OAC7BG,EAAKH,aAAa,mBAAoB,UAGxCF,EAAIG,YAAYE,EAClB,IAIF,MAAME,EAAO/J,EAASyJ,gBAAgB,6BAA8B,QAC9DO,EAAShK,EAASyJ,gBAAgB,6BAA8B,UACtEO,EAAON,aAAa,KAAM,iBAC1BM,EAAON,aAAa,IAAK,QACzBM,EAAON,aAAa,IAAK,QACzBM,EAAON,aAAa,QAAS,QAC7BM,EAAON,aAAa,SAAU,QAE9B,MAAMO,EAAOjK,EAASyJ,gBAAgB,6BAA8B,kBACpEQ,EAAKP,aAAa,eAAgB,KAClCM,EAAOL,YAAYM,GACnBF,EAAKJ,YAAYK,GACjBR,EAAIU,aAAaH,EAAMP,EAAIW,YAG3B,MAAMC,GAAU,IAAIC,eAAgBC,kBAAkBd,GAChDe,EAAU,IAAIC,KAAK,CAACJ,GAAU,CAAEK,KAAM,kBACtCC,EAASC,IAAIC,gBAAgBL,GAE7BM,EAAO7K,EAAS8K,cAAc,KACpCD,EAAKE,SAAW,aAChBF,EAAKG,KAAON,EACZG,EAAKI,QAELN,IAAIO,gBAAgBR,EACtB,CAEA,SAAApB,GACE,MAAMuB,EAAO7K,EAAS8K,cAAc,KACpCD,EAAKE,SAAW,aAChBF,EAAKG,KAAOnK,KAAK8C,OAAOwH,UAAU,aAClCN,EAAKI,OACP,CAEA,UAAA1B,GACE,MAAM6B,EAAa,CACjBC,QAAS,MACTnL,MAAOW,KAAK8B,YACZxC,OAAQU,KAAKkC,aACb3C,gBAAiBS,KAAKD,OAAOR,gBAC7B0D,QAASjD,KAAKiD,QAAQb,IAAIyE,IAAU,CAClCxE,KAAMwE,EAAOxE,KACbM,MAAOkE,EAAOlE,MACdY,UAAWsD,EAAOtD,UAClBsC,OAAQgB,EAAOhB,WAIb4E,EAAOC,KAAKC,UAAUJ,GACtBK,EAAO,IAAIjB,KAAK,CAACc,GAAO,CAAEb,KAAM,qBAChCiB,EAAMf,IAAIC,gBAAgBa,GAE1BZ,EAAO7K,EAAS8K,cAAc,KACpCD,EAAKE,SAAW,cAChBF,EAAKG,KAAOU,EACZb,EAAKI,QAELN,IAAIO,gBAAgBQ,EACtB,CAGA,KAAAC,GACE9K,KAAKiD,QAAU,GACfjD,KAAKkD,cAAgB,GACrBlD,KAAKmG,QACP,CAEA,UAAA4E,GACE,MAAO,IAAI/K,KAAKiD,QAClB,CAEA,WAAA+H,CAAY/H,GACVjD,KAAKiD,QAAUA,EAEW,SAAtBjD,KAAKD,OAAOV,OAA2C,SAAvBW,KAAKD,OAAOT,OAC9CU,KAAKuF,SAELvF,KAAKmG,QAET,CAEA,eAAAzE,GAEA,CAGA,gBAAA+C,CAAiBT,GACU,UAArBhE,KAAKqD,cAELrD,KAAKK,qBAAqBgG,OAAS,GAAKrG,KAAKiL,eAC/C,CAACnF,EAAG9B,EAAE+B,QAASC,EAAGhC,EAAEiC,SAAUjG,KAAKI,cACnCJ,KAAKM,eAAgB,EACrBN,KAAKO,eAAiB,CAACuF,EAAG9B,EAAE+B,QAASC,EAAGhC,EAAEiC,SAC1CjG,KAAKQ,aAAe,CAACsF,EAAG9B,EAAE+B,QAASC,EAAGhC,EAAEiC,WAExCjG,KAAKG,aAAc,EACnBH,KAAKI,YAAc,CAAC,CAAC0F,EAAG9B,EAAE+B,QAASC,EAAGhC,EAAEiC,UACxCjG,KAAKK,qBAAuB,GAC5BL,KAAKkL,oBAAmB,IAE5B,CAEA,eAAAxG,CAAgBV,GACd,GAAyB,UAArBhE,KAAKqD,YAET,GAAIrD,KAAKM,eAAiBN,KAAKK,qBAAqBgG,OAAS,EAAG,CAC9D,MAAMG,EAAKxC,EAAE+B,QAAU/F,KAAKQ,aAAasF,EACnCW,EAAKzC,EAAEiC,QAAUjG,KAAKQ,aAAawF,EAEzChG,KAAKK,qBAAqBoD,QAAQoD,IAChCA,EAAOhB,OAAOpC,QAAQ0H,IACpBA,EAAGrF,GAAKU,EACR2E,EAAGnF,GAAKS,MAIZzG,KAAKI,YAAYqD,QAAQ0H,IACvBA,EAAGrF,GAAKU,EACR2E,EAAGnF,GAAKS,IAGVzG,KAAKQ,aAAe,CAACsF,EAAG9B,EAAE+B,QAASC,EAAGhC,EAAEiC,SACxCjG,KAAKmG,SACLnG,KAAKiH,WAAU,EACjB,MAAWjH,KAAKG,cACdH,KAAKI,YAAYkG,KAAK,CAACR,EAAG9B,EAAE+B,QAASC,EAAGhC,EAAEiC,UAC1CjG,KAAKmG,SACLnG,KAAKiH,YAET,CAEA,cAAAtC,CAAeX,GACY,UAArBhE,KAAKqD,cAELrD,KAAKM,eACPN,KAAKM,eAAgB,EACrBN,KAAKO,eAAiB,KACtBP,KAAKQ,aAAe,MACXR,KAAKG,cACdH,KAAKG,aAAc,EACfH,KAAKI,YAAYiG,OAAS,IAC5BrG,KAAKI,YAAYkG,KAAKtG,KAAKI,YAAY,IACvCJ,KAAKK,qBAAuBL,KAAKiD,QAAQkG,OAAOtC,GAC9C7G,KAAKoL,cAAcvE,EAAQ7G,KAAKI,cAClCJ,KAAKkL,oBAAmB,IAE1BlL,KAAKmG,SACLnG,KAAKiH,WAAU,IAEnB,CAEA,SAAAA,CAAUoE,GAAQ,GAChB,KAAIrL,KAAKI,YAAYiG,OAAS,GAA9B,CAEArG,KAAK+C,IAAI4D,OACT3G,KAAK+C,IAAImE,YAAcmE,EAAQ,UAAY,OAC3CrL,KAAK+C,IAAIyE,YAAY,CAAC,EAAG,IACzBxH,KAAK+C,IAAIuF,UAAY,EACrBtI,KAAK+C,IAAI2E,YACT1H,KAAK+C,IAAIoF,OAAOnI,KAAKI,YAAY,GAAG0F,EAAG9F,KAAKI,YAAY,GAAG4F,GAE3D,IAAK,IAAIoC,EAAI,EAAGA,EAAIpI,KAAKI,YAAYiG,OAAQ+B,IAC3CpI,KAAK+C,IAAIsF,OAAOrI,KAAKI,YAAYgI,GAAGtC,EAAG9F,KAAKI,YAAYgI,GAAGpC,GAO7D,GAJAhG,KAAK+C,IAAI8D,SACT7G,KAAK+C,IAAIyE,YAAY,IACrBxH,KAAK+C,IAAIgE,UAELsE,GAASrL,KAAKK,qBAAqBgG,OAAS,EAC9C,IAAK,MAAMQ,KAAU7G,KAAKK,qBACxBL,KAAKsL,gBAAgBzE,EAnBc,CAsBzC,CAEA,eAAAyE,CAAgBzE,GACd7G,KAAK+C,IAAI4D,OACT3G,KAAK+C,IAAImE,YAAc,UACvBlH,KAAK+C,IAAIuF,WAAazB,EAAOtD,WAAa,GAAK,EAC/CvD,KAAK+C,IAAIsE,YAAc,GACvBrH,KAAK+C,IAAI2E,YACT,MAAMD,EAAMZ,EAAOhB,OACnB7F,KAAK+C,IAAIoF,OAAOV,EAAI,GAAG3B,EAAG2B,EAAI,GAAGzB,GAEjC,IAAK,IAAIoC,EAAI,EAAGA,EAAIX,EAAIpB,OAAQ+B,IAC9BpI,KAAK+C,IAAIsF,OAAOZ,EAAIW,GAAGtC,EAAG2B,EAAIW,GAAGpC,GAGnChG,KAAK+C,IAAI8D,SACT7G,KAAK+C,IAAIgE,SACX,CAEA,aAAAqE,CAAcvE,EAAQ0E,GACpB,OAAO1E,EAAOhB,OAAO2F,KAAKL,GAAMnL,KAAKiL,eAAeE,EAAII,GAC1D,CAEA,cAAAN,CAAeQ,EAAOF,GACpB,IAAIG,GAAS,EACb,IAAK,IAAItD,EAAI,EAAGuD,EAAIJ,EAAQlF,OAAS,EAAG+B,EAAImD,EAAQlF,OAAQsF,EAAIvD,IAAK,CACnE,MAAMwD,EAAKL,EAAQnD,GAAGtC,EAAG+F,EAAKN,EAAQnD,GAAGpC,EACnC8F,EAAKP,EAAQI,GAAG7F,EAAGiG,EAAKR,EAAQI,GAAG3F,EAErB6F,EAAKJ,EAAMzF,GAAQ+F,EAAKN,EAAMzF,GAC/CyF,EAAM3F,GAAKgG,EAAKF,IAAOH,EAAMzF,EAAI6F,IAAOE,EAAKF,EAAK,MAAWD,IAEjDF,GAAUA,EAC3B,CACA,OAAOA,CACT,CAEA,kBAAAR,CAAmBc,GACjBhM,KAAKF,UAAUG,cAAc,qBAAqBuF,MAAMyG,QACtDD,EAAO,QAAU,OACnBhM,KAAKF,UAAUG,cAAc,mBAAmBuF,MAAMyG,QACpDD,EAAO,QAAU,MACrB,CAEA,oBAAA9G,GACMlF,KAAKK,qBAAqBgG,OAAS,IACrCrG,KAAKiD,QAAUjD,KAAKiD,QAAQkG,OAAOtC,IAChC7G,KAAKK,qBAAqB0B,SAAS8E,IACtC7G,KAAKK,qBAAuB,GAC5BL,KAAKI,YAAc,GACnBJ,KAAKkL,oBAAmB,GACxBlL,KAAKmG,SAET,CAEA,kBAAAhB,GACE,GAAInF,KAAKK,qBAAqBgG,OAAS,EAAG,CACxC,MAAM6F,EAAS,GACTC,EAAanM,KAAKK,qBAAqB+B,IAAIyE,IAAU,IACtDA,EACHhB,OAAQgB,EAAOhB,OAAOzD,IAAI+I,IAAM,CAC9BrF,EAAGqF,EAAGrF,EAAIoG,EACVlG,EAAGmF,EAAGnF,EAAIkG,QAIdlM,KAAKiD,QAAUjD,KAAKiD,QAAQmJ,OAAOD,GACnCnM,KAAKmG,QACP,CACF,CAGA,gBAAAvB,CAAiBZ,GACU,UAArBhE,KAAKqD,cAETrD,KAAKU,aAAc,EACnBV,KAAKW,WAAa,CAACmF,EAAG9B,EAAE+B,QAASC,EAAGhC,EAAEiC,SACtCjG,KAAKY,SAAW,CAACkF,EAAG9B,EAAE+B,QAASC,EAAGhC,EAAEiC,SACtC,CAEA,eAAApB,CAAgBb,GACW,UAArBhE,KAAKqD,aAA4BrD,KAAKU,cAE1CV,KAAKY,SAAWZ,KAAKqM,YACnBrM,KAAKW,WACL,CAACmF,EAAG9B,EAAE+B,QAASC,EAAGhC,EAAEiC,UAGtBjG,KAAKmG,SACLnG,KAAKgH,YACP,CAEA,cAAAlC,CAAed,GACY,UAArBhE,KAAKqD,aAA4BrD,KAAKU,cAE1CV,KAAKU,aAAc,EACnBV,KAAKiD,QAAQqD,KAAK,CAChBjE,KAAM,MACNM,MAAO3C,KAAKsD,aACZC,UAAWvD,KAAKuD,UAChBsC,OAAQ,CAAC7F,KAAKW,WAAYX,KAAKY,YAGjCZ,KAAKW,WAAa,KAClBX,KAAKY,SAAW,KAChBZ,KAAKmG,SACP,CAEA,SAAAa,GACOhH,KAAKW,YAAeX,KAAKY,WAE9BZ,KAAK+C,IAAI4D,OACT3G,KAAK+C,IAAImE,YAAc,UACvBlH,KAAK+C,IAAIuF,UAAY,EACrBtI,KAAK+C,IAAIyE,YAAY,CAAC,EAAG,IACzBxH,KAAK+C,IAAI2E,YACT1H,KAAK+C,IAAIoF,OAAOnI,KAAKW,WAAWmF,EAAG9F,KAAKW,WAAWqF,GACnDhG,KAAK+C,IAAIsF,OAAOrI,KAAKY,SAASkF,EAAG9F,KAAKY,SAASoF,GAC/ChG,KAAK+C,IAAI8D,SACT7G,KAAK+C,IAAIyE,YAAY,IACrBxH,KAAK+C,IAAIgE,UACX,CAEA,WAAAsF,CAAYC,EAAOC,GACjB,MAAM/F,EAAK+F,EAAIzG,EAAIwG,EAAMxG,EACnBW,EAAK8F,EAAIvG,EAAIsG,EAAMtG,EACnBwG,EAAQ5E,KAAK6E,MAAMhG,EAAID,GACvBkG,EAAO9E,KAAKC,GAAK,GACjB8E,EAAe/E,KAAKgF,MAAMJ,EAAQE,GAAQA,EAC1CG,EAAOjF,KAAKkF,KAAKtG,EAAKA,EAAKC,EAAKA,GAEtC,MAAO,CACLX,EAAGwG,EAAMxG,EAAI8B,KAAKmF,IAAIJ,GAAgBE,EACtC7G,EAAGsG,EAAMtG,EAAI4B,KAAKoF,IAAIL,GAAgBE,EAE1C,CAGA,mBAAA5E,CAAoBpC,EAAQoH,EAAW,IACrC,GAAIpH,EAAOQ,OAAS,EAAG,OAAOR,EAE9B,MAAMqH,EAAS,GACf,IAAK,IAAI9E,EAAI,EAAGA,EAAIvC,EAAOQ,OAAS,EAAG+B,IAAK,CAC1C,MAAM+E,EAAKtH,EAAOuC,EAAI,IAAMvC,EAAOuC,GAC7BgF,EAAKvH,EAAOuC,GACZiF,EAAKxH,EAAOuC,EAAI,IAAMvC,EAAOuC,GAC7BkF,EAAKzH,EAAOuC,EAAI,IAAMiF,EAE5B,IAAK,IAAIE,EAAI,EAAGA,EAAIN,EAAUM,IAAK,CACjC,MAAMC,EAAID,EAAIN,EACRnH,EAAI,IAAQ,EAAIsH,EAAGtH,IACrBqH,EAAGrH,EAAIuH,EAAGvH,GAAK0H,GAChB,EAAEL,EAAGrH,EAAI,EAAEsH,EAAGtH,EAAI,EAAEuH,EAAGvH,EAAIwH,EAAGxH,GAAK0H,EAAIA,IACtCL,EAAGrH,EAAI,EAAEsH,EAAGtH,EAAI,EAAEuH,EAAGvH,EAAIwH,EAAGxH,GAAK0H,EAAIA,EAAIA,GAEvCxH,EAAI,IAAQ,EAAIoH,EAAGpH,IACrBmH,EAAGnH,EAAIqH,EAAGrH,GAAKwH,GAChB,EAAEL,EAAGnH,EAAI,EAAEoH,EAAGpH,EAAI,EAAEqH,EAAGrH,EAAIsH,EAAGtH,GAAKwH,EAAIA,IACtCL,EAAGnH,EAAI,EAAEoH,EAAGpH,EAAI,EAAEqH,EAAGrH,EAAIsH,EAAGtH,GAAKwH,EAAIA,EAAIA,GAE7CN,EAAO5G,KAAK,CAAER,IAAGE,KACnB,CACF,CAGA,OADAkH,EAAO5G,KAAKT,EAAOA,EAAOQ,OAAS,IAC5B6G,CACT,CAEA,aAAAhF,CAAcrC,EAAQ3G,EAAS,GAC7B,GAAI2G,EAAOQ,QAAUnH,EAAQ,OAAO2G,EAEpC,MAAM4H,EAAW,GACjB,IAAK,IAAIrF,EAAI,EAAGA,EAAIvC,EAAOQ,OAAQ+B,IAAK,CACtC,IAAIsF,EAAO,EAAGC,EAAO,EAAGC,EAAQ,EAEhC,IAAK,IAAIjC,EAAI/D,KAAKiG,IAAI,EAAGzF,EAAIlJ,GAASyM,GAAK/D,KAAKkG,IAAIjI,EAAOQ,OAAS,EAAG+B,EAAIlJ,GAASyM,IAClF+B,GAAQ7H,EAAO8F,GAAG7F,EAClB6H,GAAQ9H,EAAO8F,GAAG3F,EAClB4H,IAGFH,EAASnH,KAAK,CAAER,EAAG4H,EAAOE,EAAO5H,EAAG2H,EAAOC,GAC7C,CAEA,OAAOH,CACT,CAGA,cAAA7H,CAAe5B,GACb,MAAsB,UAAlBA,EAAE+J,gBACe,IAAhB/J,EAAEgK,WAAuBhK,EAAE3E,MAAQ,IAAM2E,EAAE1E,OAAS,GAI3D,CAGA,cAAAyF,CAAef,IACY,SAArBhE,KAAKqD,aAA6C,UAAlBW,EAAE+J,aAAwC,IAAb/J,EAAEiK,UACjEjO,KAAKc,WAAY,EACjBd,KAAKe,SAAWiD,EAAEkK,QAEtB,CAEA,aAAAlJ,CAAchB,GACRhE,KAAKc,YACPd,KAAKa,MAAQmD,EAAEkK,QAAUlO,KAAKe,SAC9Bf,KAAKe,SAAWiD,EAAEkK,QAClBlO,KAAKmG,SAET,CAEA,YAAAlB,GACEjF,KAAKc,WAAY,CACnB,CAGA,aAAAsE,GACkBpF,KAAKF,UAAUG,cAAc,mBACrCkO,UAAUC,OAAO,YAC3B,EAIFlP,EAAOU,aAAeA,EAGtBT,EAASwE,iBAAiB,mBAAoB,KAC5CxE,EAASqE,iBAAiB,wBAAwBC,QAAQ4K,IACxD,MAAMtO,EAAS,CAAC,EAGZsO,EAAQxK,QAAQxE,QAAOU,EAAOV,MAAQ4C,SAASoM,EAAQxK,QAAQxE,QAC/DgP,EAAQxK,QAAQvE,SAAQS,EAAOT,OAAS2C,SAASoM,EAAQxK,QAAQvE,SACjE+O,EAAQxK,QAAQtE,kBAAiBQ,EAAOR,gBAAkB8O,EAAQxK,QAAQtE,iBAC1E8O,EAAQxK,QAAQnE,eAAcK,EAAOL,aAAe2O,EAAQxK,QAAQnE,cAExE,IAAIE,EAAayO,EAAStO,MAI/B,CA97BD,CA87BGb,OAAQC","ignoreList":[]}